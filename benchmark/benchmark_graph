# output as png image
set terminal png

# save file to "benchmark.png"
set output "mysql_benchmark.png"

# graph title
set title "Benchmark for Sysbench"

# aspect ratio for image size
set size 1,1

# enable grid on y and x axis
set grid y
set grid x

# x-axis label
set xlabel "Threads"

# y-axis label
set ylabel "Transactions (tps)"

# plot data from sysbench.csv
plot "results/local_mysql.csv" using (log($1)):2:xtic(1) with linesp title 'data local', \
     "results/local_mysql.csv" using (log($1)):3:xtic(1) with linesp title 'non-data local

# fio_generate_plots "Data-aware Scheduler"
# sudo yum install fio gnuplot
# fio2gnuplot -t "Data-aware Scheduler" -p '*local.log' -g









set terminal png
set output "fio_benchmark_max.png"
set title "Benchmark with fio (20GB)"
set size 1,1

set grid y
set grid x

set boxwidth 0.5
set style fill solid

set ylabel "Max Read (MB/s)"
set style line 1 lc rgb "red"
set style line 2 lc rgb "blue"
set yrange [0:2000]
set xtics ("data-local" 1.75, "non data-local" 3.75,)

set boxwidth 0.5
set style fill solid

plot 'read_max.dat' every 2 using 1:2 with boxes ls 1 notitle, 'read_max.dat' every 2::1 using 1:2 with boxes ls 2 notitle